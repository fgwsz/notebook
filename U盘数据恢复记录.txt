2025年03月27日,单位高大哥拿了一个U盘找到我,希望我能够帮忙看看这个U盘咋回事?
我一开始使用的是Ubuntu22.04LTS操作系统,插上这个U盘之后,
使用lsblk查看了这个U盘的盘符是奇怪的/dev/sdc
一般在linux操作系统上U盘的盘符应该是/dev/sdb[number]这个形式才对,
然后显示了这个U盘的容量是0MB.
之后我使用linux上面的数据恢复工具`gddrescue`/`testdisk`/`dd`
来检查这个U盘,检查的结果都是无法连接到这个设备.
之后我向ai询问了上述的这种情况,然后进行了一系列硬件测试,
得到一个结论就是这个U盘的硬件设置有问题,
可能是分区表损坏,也可能直接是物理损坏了完全不能用了.
上述测试过程一直持续到我下班回家,
快下班的时候,我告诉高大哥U盘放在我这里,我还有其他办法要尝试一下.
回到家吃饱饭后,
我使用Windows11操作系统重新插入U盘,一开始没有显示盘符,
重新尝试插入几次U盘之后,终于出现了盘符,但是是灰色的,
当我点击想要打开这个盘的时候,显示【无法识别这个设备】这种类似信息,
我在bilibili上面搜索相关内容,
得到了一个和我类似情况的UP主发的解决攻略视频.
1.首先使用`ChipGenius`来查看U盘发行商和型号/容量信息
注意这个软件不支持Unicode(贸然启用,会显示乱码),
请不要使用Windows11在时间区域高级设置中的【Beta Unicode全球语言支持】.
如果已勾线,请去掉上述勾选项,然后重启电脑生效.
2.使用U盘量产工具对U盘进行重新量产
我查询到这个U盘是闪迪一芯的,
我使用了和这个硬件匹配的量产工具软件`FirstChipMpTools`,
对这个U盘进行重新量产,操作步骤是
    【设定】
    选择【容量优先】
    选择磁盘类型【NTFS】
    磁盘容量选择了BIN3【30000MB】(因为这个U盘是32GB的)
    然后【确定】
    然后【全部开始】
    等待量产进度达到100%即可.
量产成功之后,可能会发现现在U盘可以被正常读取了,
磁盘盘符不是灰色得了,已经正常显示了,
但是打开U盘发现,这个U盘内容是空的.
而且重新量产后的整个U盘的容量比原先小了一些(现在只有15GB).
这些都没有关系,现在U盘恢复正常了,
那么如何找回丢失的数据就成了又一个亟需解决的问题?
我选择使用了Windows11系统上的数据恢复软件`DiskGenius`来进行数据找回,
具体的操作步骤是
    选中U盘的硬件盘编号
    右键菜单选择【搜索已丢失的分区】
    搜索范围勾选【整个磁盘】
    点击【开始搜索】
    开始进行磁盘扫描
    等待扫描完成即可
搜索完毕,软件提示没有发现任何的数据分区.
接下来，我尝试了Windows自带的数据恢复命令`chkdsk`,
这个U盘的盘符在我的电脑上是e盘,
我使用如下CMD命令进行数据恢复:
chkdsk e: /F
数据恢复完成之后,我打开U盘,发现依旧是空的,没有恢复出任何数据.
至此,数据恢复这个需求没有得到解决.
第二天上午,我重新使用`gddrescue`将U盘的全部数据导出成一个镜像文件.img,
然后使用7-zip进行解压缩得到了一些文件,但是这些文件并没有我想要的,
而且有一部分文件内容是乱码,图片文件也无法打开.
接下来我尝试了使用`testdisk`这个软件来进行数据恢复,
扫描之后,`testdisk`提示我这个U盘设备里面没有任何文件.
我仍然不甘心,继续使用`foremost`这个软件强制提取.img镜像文件中的数据,
提取的结果就是没有提取出任何文件,LOG文件中显示了镜像中不包含任何数据文件.
我把7-zip解压出来的文件复制到原先的U盘中,至此作罢.
